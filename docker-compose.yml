# ============================================================
# 104 Pro Auto Clock-In - Docker Compose
# ============================================================
#
# Usage:
#   docker compose up clock-in   # Clock in
#   docker compose up clock-out  # Clock out
#
# With cron:
#   50 8 * * 1-5 cd /path/to/104-auto-clockin && docker compose up clock-in
#   5 18 * * 1-5 cd /path/to/104-auto-clockin && docker compose up clock-out
#
# ============================================================

services:
  # Development environment
  104-clockin-dev:
    image: mcr.microsoft.com/playwright/python:v1.58.0-noble
    working_dir: /app
    volumes:
      - .:/app
    command: sleep infinity

  clock-in:
    build: .
    command: ["--action", "clock_in"]
    volumes:
      - ./logs:/app/logs
      - ./screenshots:/app/screenshots
      - ./.env:/app/.env:ro

  clock-out:
    build: .
    command: ["--action", "clock_out"]
    volumes:
      - ./logs:/app/logs
      - ./screenshots:/app/screenshots
      - ./.env:/app/.env:ro
